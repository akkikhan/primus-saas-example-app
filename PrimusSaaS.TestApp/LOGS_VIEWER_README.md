# Real-Time Logs Viewer

## Overview
A comprehensive real-time logs viewer UI has been created for the PrimusSaaS.TestApp application. This feature allows you to monitor, filter, and analyze application logs generated by the PrimusSaaS.Logging package.

## Features

### üìä Statistics Dashboard
- **Total Logs Count**: View the total number of logs
- **Log Level Breakdown**: See counts for DEBUG, INFO, WARNING, ERROR, and CRITICAL logs
- **Visual Cards**: Color-coded statistics cards for each log level

### üîç Advanced Filtering
- **Log Level Filter**: Filter by DEBUG, INFO, WARNING, ERROR, or CRITICAL
- **Category Filter**: Filter by logger category (e.g., Microsoft.AspNetCore, PrimusSaaS.TestApp)
- **Text Search**: Search within log messages
- **Date Range**: Filter logs by start and end date/time
- **Clear Filters**: Reset all filters with one click

### üìã Logs Table
- **Expandable Rows**: Click on any log entry to view full details
- **Color-Coded Levels**: Each log level has a distinct color and icon
- **Pagination**: Navigate through logs with customizable page size (default: 50)
- **Sortable**: Logs are displayed newest first

### ‚ö° Real-Time Features
- **Auto-Refresh**: Automatically refreshes logs every 5 seconds
- **Pause/Resume**: Toggle auto-refresh on/off
- **Manual Refresh**: Refresh logs on demand

### üíæ Export & Management
- **Export to JSON**: Download logs as JSON file
- **Clear Logs**: Delete all logs (with confirmation)

### üì± Responsive Design
- **Mobile-Friendly**: Works on all screen sizes
- **Modern UI**: Gradient backgrounds, glassmorphism effects
- **Smooth Animations**: Hover effects and transitions

## Accessing the Logs Viewer

### Method 1: Direct URL
Navigate to: `http://localhost:4200/logs`

### Method 2: Dashboard Navigation
1. Login to the application
2. Look for the "Logs" link in the sidebar navigation
3. Click on it to navigate to the logs viewer

## API Endpoints

The logs viewer uses the following backend API endpoints:

### GET /api/logs
Fetches paginated logs with optional filters.

**Query Parameters:**
- `page` (int): Page number (default: 1)
- `pageSize` (int): Number of logs per page (default: 50)
- `level` (string): Filter by log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
- `category` (string): Filter by logger category
- `search` (string): Search text in messages
- `startDate` (DateTime): Filter logs after this date
- `endDate` (DateTime): Filter logs before this date

**Response:**
```json
{
  "logs": [...],
  "total": 150,
  "page": 1,
  "pageSize": 50,
  "totalPages": 3
}
```

### GET /api/logs/stats
Fetches log statistics.

**Response:**
```json
{
  "totalLogs": 150,
  "byLevel": {
    "DEBUG": 20,
    "INFO": 100,
    "WARNING": 20,
    "ERROR": 8,
    "CRITICAL": 2
  },
  "byCategory": {
    "Microsoft.AspNetCore": 50,
    "PrimusSaaS.TestApp": 100
  },
  "recentErrors": [...]
}
```

### GET /api/logs/categories
Fetches all unique log categories.

**Response:**
```json
[
  "Microsoft.AspNetCore.Hosting.Lifetime",
  "PrimusSaaS.TestApp.Controllers.LoggingTestController",
  ...
]
```

### DELETE /api/logs
Clears all logs from the log file.

**Response:**
```json
{
  "message": "Logs cleared successfully"
}
```

## Log Entry Structure

Each log entry in the system follows this structure:

```json
{
  "timestamp": "2025-11-24T07:46:19.5198907Z",
  "level": "INFO",
  "message": "This is an INFO level message",
  "context": {
    "applicationId": "PRIMUS-TEST-APP",
    "environment": "development",
    "category": "PrimusSaaS.TestApp.Controllers.LoggingTestController",
    "eventId": 0,
    "eventName": "SomeEvent",
    "requestId": "req-53318b80ff514cbca36a672e0420778b",
    "method": "GET",
    "path": "/api/LoggingTest/test-all-levels",
    "statusCode": 200,
    "duration": 0
  }
}
```

## Usage Tips

1. **Finding Errors Quickly**: Use the ERROR or CRITICAL filter to quickly identify issues
2. **Tracking Requests**: Use the Request ID to trace all logs related to a specific HTTP request
3. **Performance Monitoring**: Look for logs with `duration` in the context to identify slow operations
4. **Category Filtering**: Filter by category to focus on specific parts of your application
5. **Export for Analysis**: Export logs to JSON for offline analysis or sharing with team members

## Color Coding

- üîç **DEBUG**: Light gradient (development/diagnostic info)
- ‚ÑπÔ∏è **INFO**: Blue gradient (general information)
- ‚ö†Ô∏è **WARNING**: Orange gradient (potential issues)
- ‚ùå **ERROR**: Pink gradient (errors that need attention)
- üî• **CRITICAL**: Red gradient with pulse animation (critical failures)

## Technical Stack

### Backend
- **ASP.NET Core 7.0**
- **LogsController**: Handles all log-related API endpoints
- **File-based logging**: Reads from `logs/app.log`

### Frontend
- **Angular**: Component-based architecture
- **RxJS**: For real-time updates and auto-refresh
- **HttpClient**: For API communication
- **FormsModule**: For two-way data binding in filters

### Styling
- **Modern CSS**: Gradients, glassmorphism, animations
- **Responsive Design**: Mobile-first approach
- **Accessibility**: Proper ARIA labels and semantic HTML

## Future Enhancements

Potential improvements for the logs viewer:

1. **WebSocket Support**: Real-time log streaming without polling
2. **Log Aggregation**: Support for multiple log files
3. **Advanced Search**: Regular expression support
4. **Bookmarking**: Save filter combinations
5. **Alerts**: Configure alerts for specific log patterns
6. **Charts**: Visualize log trends over time
7. **Dark Mode**: Toggle between light and dark themes

## Troubleshooting

### Logs Not Showing
- Ensure the backend is running on `http://localhost:5001`
- Check that the `logs/app.log` file exists
- Verify CORS is configured correctly

### Auto-Refresh Not Working
- Check browser console for errors
- Ensure the API endpoints are accessible
- Try manually refreshing to test connectivity

### Performance Issues
- Reduce page size if loading many logs
- Use filters to narrow down results
- Consider clearing old logs periodically

## Support

For issues or questions, please refer to the main application documentation or contact the development team.
